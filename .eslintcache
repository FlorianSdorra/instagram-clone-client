[{"/home/dci/excercises/INSTAGRAM/client/src/index.js":"1","/home/dci/excercises/INSTAGRAM/client/src/App.js":"2","/home/dci/excercises/INSTAGRAM/client/src/reportWebVitals.js":"3","/home/dci/excercises/INSTAGRAM/client/src/components/Navbar.js":"4","/home/dci/excercises/INSTAGRAM/client/src/components/screens/Home.js":"5","/home/dci/excercises/INSTAGRAM/client/src/components/screens/Login.js":"6","/home/dci/excercises/INSTAGRAM/client/src/components/screens/Signup.js":"7","/home/dci/excercises/INSTAGRAM/client/src/components/screens/Profile.js":"8","/home/dci/excercises/INSTAGRAM/client/src/components/screens/CreatePost.js":"9","/home/dci/excercises/INSTAGRAM/client/src/keys.js":"10","/home/dci/excercises/INSTAGRAM/client/src/reducers/userReducer.js":"11","/home/dci/excercises/INSTAGRAM/client/src/components/screens/UserProfile.js":"12"},{"size":500,"mtime":1607008129800,"results":"13","hashOfConfig":"14"},{"size":1637,"mtime":1621362719877,"results":"15","hashOfConfig":"14"},{"size":362,"mtime":1607008129800,"results":"16","hashOfConfig":"14"},{"size":1353,"mtime":1618236151599,"results":"17","hashOfConfig":"14"},{"size":6381,"mtime":1621362715141,"results":"18","hashOfConfig":"14"},{"size":2713,"mtime":1620401190215,"results":"19","hashOfConfig":"14"},{"size":2429,"mtime":1618235588488,"results":"20","hashOfConfig":"14"},{"size":1907,"mtime":1621362717825,"results":"21","hashOfConfig":"14"},{"size":3415,"mtime":1612884669474,"results":"22","hashOfConfig":"14"},{"size":125,"mtime":1610567008130,"results":"23","hashOfConfig":"14"},{"size":407,"mtime":1621969660915,"results":"24","hashOfConfig":"14"},{"size":4530,"mtime":1621973734800,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"6ug976",{"filePath":"29","messages":"30","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31","usedDeprecatedRules":"28"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"28"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"28"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42","usedDeprecatedRules":"28"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"28"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/home/dci/excercises/INSTAGRAM/client/src/index.js",[],["56","57"],"/home/dci/excercises/INSTAGRAM/client/src/App.js",["58","59"],"import React, {useEffect, createContext, useReducer, useContext} from 'react';\nimport NavBar from './components/Navbar.js';\nimport './App.css';\nimport {BrowserRouter, Route, Switch, useHistory} from 'react-router-dom';\nimport Home from './components/screens/Home.js';\nimport Signup from './components/screens/Signup.js';\nimport Profile from './components/screens/Profile.js';\nimport Login from './components/screens/Login.js';\nimport CreatePost from './components/screens/CreatePost.js';\nimport UserProfile from './components/screens/UserProfile.js';\nimport {initialState, reducer} from './reducers/userReducer'\n\nexport const UserContext = createContext()\n\nconst Routing = () => {\n  const history = useHistory();\n  const {state, dispatch} = useContext(UserContext)\n  useEffect(()=>{\n    const user = JSON.parse(localStorage.getItem(\"user\"))\n    if(user){\n      dispatch({type:\"USER\", payload:user})\n    }else{\n      history.push('/login')\n    }\n  },[])\n  return(\n    <Switch>\n    <Route exact path=\"/\">\n    <Home/>\n    </Route>\n    <Route path=\"/login\">\n      <Login/>\n    </Route>\n    <Route path=\"/signup\">\n      <Signup/>\n    </Route>\n    <Route exact path=\"/profile\">\n      <Profile/>\n    </Route>\n    <Route path=\"/create\">\n      <CreatePost/>\n    </Route>\n    <Route path=\"/profile/:userid\">\n      <UserProfile/>\n    </Route>\n    </Switch>\n  )\n}\n\nfunction App() {\n  const [state, dispatch] = useReducer(reducer, initialState)\n  return (\n      <UserContext.Provider value={{state,dispatch}}>\n      <BrowserRouter>\n        <NavBar/>\n        <Routing/>\n      </BrowserRouter>\n      </UserContext.Provider>\n  );\n}\n\nexport default App;\n","/home/dci/excercises/INSTAGRAM/client/src/reportWebVitals.js",[],"/home/dci/excercises/INSTAGRAM/client/src/components/Navbar.js",["60"],"import React, {useContext} from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport {UserContext} from '../App';\n\nconst NavBar = () => {\n    const {state, dispatch} = useContext(UserContext);\n    const history = useHistory();\n    const renderList = () => {\n        if(state){\n            return [\n                <li><Link to=\"/profile\">Profile</Link></li>,\n                <li><Link to=\"/create\">Create Post</Link></li>,\n                <li>\n                    <button className=\"btn #c62828 red darken-3\"\n                        onClick={()=>{\n                        localStorage.clear()\n                        dispatch({type:\"CLEAR\"})\n                        window.location.reload()\n                    }}>\n                        Log Out\n                    </button>\n                </li>\n            ]\n        }else{\n            return [\n                <li><Link to=\"/login\">Login</Link></li>,\n                <li><Link to=\"/signup\">Signup</Link></li>\n            ]\n        }\n    }\n\n    return (\n        <nav>\n            <div className=\"nav-wrapper white\">\n                <Link to={state?\"/\":\"/login\"} className=\"brand-logo left\">Instagram</Link>\n                <ul id=\"nav-mobile\" className=\"right\">\n                    {renderList()}\n                </ul>\n            </div>\n        </nav>\n    )\n}\n\nexport default NavBar","/home/dci/excercises/INSTAGRAM/client/src/components/screens/Home.js",["61"],"import React, {useState, useEffect, useContext} from 'react';\nimport {UserContext} from '../../App';\nimport {Link} from 'react-router-dom';\n\nconst Home = () => {\n    const [data, setData] = useState([]);\n    const {state, dispatch} = useContext(UserContext)\n    console.log(data)\n\n    const mainCall = ()=>{\n        fetch('/allposts',{\n            headers:{\n                \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\n            }\n        }).then(res=>res.json())\n        .then(result=>{\n            console.log(result.posts)\n            setData(result.posts)\n        })\n    }\n    useEffect(mainCall,[])\n    // console.log(data[0].postedBy._id)\n    // console.log(state)\n\n    const likePost = (id) => {\n        fetch('/like',{\n                method:\"put\",\n                headers:{\n                    \"Content-Type\":\"application/json\",\n                    \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\n                },\n                body:JSON.stringify({\n                    postId:id\n                })\n        }).then(res=>res.json())\n        .then(result=>{\n            const newData = data.map(item=>{\n                result.postedBy = item.postedBy\n                if(item._id===result._id){\n                    return result\n                }else{\n                    return item\n                }\n            })\n            setData(newData)\n        })\n        .catch(err=>{\n            console.log(err)\n        })\n    }\n\n    const unlikePost = (id) => {\n        fetch('/unlike',{\n                method:\"put\",\n                headers:{\n                    \"Content-Type\":\"application/json\",\n                    \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\n                },\n                body:JSON.stringify({\n                    postId:id\n                })\n        }).then(res=>res.json())\n        .then(result=>{\n            const newData = data.map(item=>{\n                result.postedBy = item.postedBy\n                if(item._id===result._id){\n                    return result\n                }else{\n                    return item\n                }\n            })\n            setData(newData)\n        })\n        .catch(err=>{\n            console.log(err)\n        })\n    }\n\n    const makeComment = (text, postId) => {\n        fetch('/comment',{\n            method:\"put\",\n            headers:{\n                \"Content-Type\":\"application/json\",\n                \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\n            },\n            body:JSON.stringify({\n                postId:postId,\n                text:text\n            })\n        }).then(res=>res.json())\n        .then(result=>{\n            const newData = data.map(item=>{\n                result.postedBy = item.postedBy\n                if(item._id===result._id){\n                    return result\n                }else{\n                    return item\n                }\n            })\n            setData(newData)\n        })\n        .catch(err=>{\n            console.log(err)\n        })\n    }\n\n    const deletePost = (postId)=>{\n        fetch(`/deletepost/${postId}`,{\n            method:\"delete\",\n            headers:{\n                Authorization:`Bearer ${localStorage.getItem(\"jwt\")}`\n            }\n        }).then(res=>res.json())\n        .then(result=>{\n            console.log(result)\n            const newData = data.filter(item=>{\n                return item._id !== result._id\n            })\n            setData(newData)\n        })\n    }\n\n    const deleteComment = (postId, commentId) => {\n        fetch(`/deletecomment/${postId}/${commentId}`,{\n            method:\"delete\",\n            headers:{\n                Authorization:`Bearer ${localStorage.getItem(\"jwt\")}`\n            }\n        }).then(res=>res.json())\n        .then(result=>{\n            const newData = data.map(item=>{\n                if (item._id === result._id){\n                    return result\n                }\n                else{\n                    return item\n                }\n            })\n            setData(newData)\n            \n        })\n    }\n\n\n\n    const list = data.map(item=>{\n                    return(\n                        <div className=\"card home-card\" key={item._id}>\n                            <h5><Link to={item.postedBy._id !== state._id ? `profile/${item.postedBy._id}` : '/profile'}>{item.postedBy.name}</Link> {item.postedBy._id === state._id && <i className=\"material-icons\" style={{float:\"right\"}} onClick={()=>deletePost(item._id)}>delete</i>}</h5>\n                            <div className=\"card-image\">\n                                <img src={item.photo} alt=\"cardimage\"/>\n                            </div>\n                            <div className=\"card-content\">\n                                <i className=\"material-icons \">favorite_border</i>\n                                {item.likes.includes(state._id)?<i className=\"material-icons\" onClick={()=>unlikePost(item._id)}>thumb_down</i>:<i className=\"material-icons\" onClick={()=>likePost(item._id)}>thumb_up</i>}\n                                <h6>{item.likes.length} likes</h6>\n                                <h6>{item.title}</h6>\n                                <p>{item.body}</p>\n                                {\n                                    item.comments.map(record=>{\n                                        return(\n                                            <h6 key={record._id}><span style={{fontWeight:\"500\"}}>{record.postedBy.name}</span> {record.text}{record.postedBy._id === state._id && <i className=\"material-icons\" style={{float:\"right\"}} onClick={()=>deleteComment(item._id, record._id)}>delete</i>}</h6>\n                                        )\n                                    })\n                                }\n                                <form onSubmit={(e)=>{\n                                    e.preventDefault()\n                                    makeComment(e.target[0].value, item._id)\n                                    e.target.reset()\n                                }}>\n                                    <input type=\"text\" placeholder=\"add a comment\"/>\n                                </form>\n                            </div>\n                            </div>\n                    )\n                            \n})\n\n    return (\n        <div className=\"home\">\n                {list}\n        </div>\n    )\n}\n\nexport default Home;","/home/dci/excercises/INSTAGRAM/client/src/components/screens/Login.js",["62"],"import React, {useState, useContext} from 'react';\nimport {Link, useHistory} from 'react-router-dom';\nimport {UserContext} from '../../App'\nimport M from 'materialize-css';\n\n\nconst Login = () => {\n        const {state, dispatch} = useContext(UserContext)\n        const history = useHistory();\n        const [password, setPassword] = useState(\"\");\n        const [email, setEmail] = useState(\"\");\n    \n        const postData = () => {\n            // eslint-disable-next-line no-useless-escape\n            if(!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)){\n                M.toast({html: \"Please use a valid email\", classes:\"#c62828 red darken\"})\n                return\n            }\n            fetch(\"/signin\",{\n                method:\"post\",\n                headers:{\n                    \"Content-Type\":\"application/json\"\n                },\n                body:JSON.stringify({\n                    password,\n                    email\n                })\n            }).then(res=>res.json())\n            .then(data=>{\n                console.log(data);\n                if(data.error){\n                    M.toast({html: data.error, classes:\"#c62828 red darken\"})\n                }\n                else{\n                    localStorage.setItem(\"jwt\", data.token);\n                    localStorage.setItem(\"user\", JSON.stringify(data.user))\n                    dispatch({type:\"USER\", payload:data.user})\n                    M.toast({html: \"Logged In successfully\", classes:\"#43a047 green darken-1\"});\n                    history.push('/')\n                    console.log(localStorage)\n                }\n            }).catch(err=>{\n                console.log(err)\n            })   \n        }\n    return (\n        \n        <div className=\"mycard\">\n            <div className=\"card auth-card input-field\">\n                <h2 className=\"mybrand-logo\">Instagram</h2>\n                <input\n                type=\"text\"\n                placeholder=\"email\"\n                value={email}\n                onChange={(e)=>setEmail(e.target.value)}\n                />\n                <input\n                type=\"password\"\n                placeholder=\"password\"\n                value={password}\n                onChange={(e)=>setPassword(e.target.value)}\n                />\n                <button className=\"btn waves-effect waves-light #2979ff blue accent-2\" onClick={()=>postData()}>Log In</button>\n                <h5>\n                    Don't have an Account? <Link to=\"/signup\" className=\"myLink\"> Sign Up</Link>\n                </h5>\n            </div>\n        </div>\n    )\n}\n\nexport default Login;","/home/dci/excercises/INSTAGRAM/client/src/components/screens/Signup.js",[],"/home/dci/excercises/INSTAGRAM/client/src/components/screens/Profile.js",["63"],"import React, {useEffect, useState, useContext} from 'react';\nimport {UserContext} from '../../App'\n\nconst Profile = () => {\n    const {state, dispatch} = useContext(UserContext)\n    console.log(state)\n    const [mypics, setPics] = useState([]);\n    useEffect(()=>{\n        fetch('/myposts',{\n            headers:{\n                \"Authorization\":\"Bearer \"+localStorage.getItem('jwt')\n            }\n        }).then(res=>res.json())\n        .then(result=>{\n            setPics(result.myposts)\n        })\n    }, [])\n    return (\n        <div style={{maxWidth:\"900px\", margin: \"0 auto\"}}>\n            <div style={{\n                display:\"flex\",\n                justifyContent:\"space-around\",\n                margin:\"18px 0\",\n                borderBottom:\"1px solid grey\"\n            }}>\n                <div>\n                    <img style={{width:\"160px\", height:\"160px\", borderRadius:\"50%\"}}\n                    src=\"https://images.unsplash.com/photo-1549548731-a47a58b650f5?ixid=MXwxMjA3fDB8MHxzZWFyY2h8MTZ8fHBlcnNvbnxlbnwwfDJ8MHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60\"\n                    alt=\"user\"\n                    />\n                </div>\n                <div>\n                    <h4>{state?state.name:\"loading\"}</h4>\n                    <div style={{display:\"flex\", justifyContent:\"space-between\", width:\"109%\"}}>\n                        <h6>40 posts</h6>\n                        <h6>40 followers</h6>\n                        <h6>40 following</h6>\n                    </div>\n                </div>    \n            </div>\n            <div className=\"gallery\">\n                {\n                    mypics.map(item=>{\n                        return (\n                            <img className=\"item\" key={item._id} src={item.photo} alt={item.title}/>\n                        )\n                    })\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default Profile;","/home/dci/excercises/INSTAGRAM/client/src/components/screens/CreatePost.js",[],"/home/dci/excercises/INSTAGRAM/client/src/keys.js",[],"/home/dci/excercises/INSTAGRAM/client/src/reducers/userReducer.js",[],"/home/dci/excercises/INSTAGRAM/client/src/components/screens/UserProfile.js",["64"],{"ruleId":"65","replacedBy":"66"},{"ruleId":"67","replacedBy":"68"},{"ruleId":"69","severity":1,"message":"70","line":17,"column":10,"nodeType":"71","messageId":"72","endLine":17,"endColumn":15},{"ruleId":"73","severity":1,"message":"74","line":25,"column":5,"nodeType":"75","endLine":25,"endColumn":7,"suggestions":"76"},{"ruleId":"69","severity":1,"message":"77","line":7,"column":11,"nodeType":"71","messageId":"72","endLine":7,"endColumn":18},{"ruleId":"69","severity":1,"message":"78","line":7,"column":19,"nodeType":"71","messageId":"72","endLine":7,"endColumn":27},{"ruleId":"69","severity":1,"message":"70","line":8,"column":16,"nodeType":"71","messageId":"72","endLine":8,"endColumn":21},{"ruleId":"69","severity":1,"message":"78","line":5,"column":19,"nodeType":"71","messageId":"72","endLine":5,"endColumn":27},{"ruleId":"73","severity":1,"message":"79","line":21,"column":7,"nodeType":"75","endLine":21,"endColumn":9,"suggestions":"80"},"no-native-reassign",["81"],"no-negated-in-lhs",["82"],"no-unused-vars","'state' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'dispatch' and 'history'. Either include them or remove the dependency array.","ArrayExpression",["83"],"'history' is assigned a value but never used.","'dispatch' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'state' and 'userid'. Either include them or remove the dependency array.",["84"],"no-global-assign","no-unsafe-negation",{"desc":"85","fix":"86"},{"desc":"87","fix":"88"},"Update the dependencies array to be: [dispatch, history]",{"range":"89","text":"90"},"Update the dependencies array to be: [state, userid]",{"range":"91","text":"92"},[949,951],"[dispatch, history]",[637,639],"[state, userid]"]